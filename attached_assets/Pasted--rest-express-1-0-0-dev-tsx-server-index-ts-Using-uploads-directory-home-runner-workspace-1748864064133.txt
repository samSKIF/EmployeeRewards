
> rest-express@1.0.0 dev
> tsx server/index.ts

Using uploads directory: /home/runner/workspace/server/uploads
Initializing Firebase app with project ID: employee-reward-fb8ea
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Initializing MongoDB for social features...
Initializing MongoDB for social features...
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Connected to MongoDB successfully
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
MongoDB indexes created successfully
MongoDB connected successfully
MongoDB social routes initialized
ðŸŽ‚ Scheduling birthday rewards job (daily at 08:00)
11:33:03 AM [express] serving on port 5000
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Browserslist: browsers data (caniuse-lite) is 8 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Cache MISS for key: locations:org:1
Cache MISS for key: departments:org:1
11:33:15 AM [express] GET /api/users/locations 304 in 377ms :: ["London","New York","New york office"â€¦
11:33:15 AM [express] GET /api/points/balance 304 in 404ms :: {"balance":0,"userId":11}
11:33:16 AM [express] GET /api/users/departments 304 in 405ms :: ["Engineering","Finance","HR","Inforâ€¦
Birthday users found: 5
Anniversary users found: 1
Total celebrations returning: 6
11:33:16 AM [express] GET /api/celebrations/today 304 in 463ms :: [{"id":2167,"user":{"id":2167,"nameâ€¦
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
/api/users/me: Returning data for user 11 (Canva Administrator, admin@canva.com)
User isAdmin value: true
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Final user object isAdmin: true
11:33:22 AM [express] GET /api/users/me 304 in 6224ms :: {"id":11,"username":"admin_canva","name":"Caâ€¦
Returning 801 users for company 1
11:33:22 AM [express] GET /api/users 304 in 6878ms :: [{"id":16,"username":"brian_lopez","name":"Briaâ€¦
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
/api/users/me: Returning data for user 11 (Canva Administrator, admin@canva.com)
User isAdmin value: true
11:33:22 AM [express] GET /api/celebrations/upcoming 304 in 7128ms :: [{"id":2122,"user":{"id":2122,"â€¦
Final user object isAdmin: true
11:33:22 AM [express] GET /api/users/me 304 in 151ms :: {"id":11,"username":"admin_canva","name":"Canâ€¦
Cache MISS for key: social:posts:org:1:limit:20:skip:0:author:all
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
/api/users/me: Returning data for user 11 (Canva Administrator, admin@canva.com)
User isAdmin value: true
Final user object isAdmin: true
11:33:23 AM [express] GET /api/users/me 304 in 161ms :: {"id":11,"username":"admin_canva","name":"Canâ€¦
11:33:23 AM [express] GET /api/social/posts 304 in 538ms :: [{"_id":"683d85dd0379183dda2ac3be","authoâ€¦
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
11:33:23 AM [express] GET /api/employee-status/users/11/statuses 304 in 154ms :: []
11:33:24 AM [express] GET /api/social/stats 304 in 1380ms :: {"posts":4,"comments":0,"reactions":0,"râ€¦
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
11:33:24 AM [express] GET /api/employee-status/users/11/statuses 304 in 152ms :: []
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
11:33:24 AM [express] GET /api/employee-status/users/11/statuses 304 in 153ms :: []
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
11:33:24 AM [express] GET /api/employee-status/users/11/statuses 304 in 151ms :: []
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
11:33:25 AM [express] GET /api/employee-status/users/11/statuses 304 in 152ms :: []
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
11:33:25 AM [express] GET /api/employee-status/users/11/statuses 304 in 152ms :: []
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
11:33:26 AM [express] GET /api/employee-status/users/11/statuses 304 in 151ms :: []
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
11:33:26 AM [express] GET /api/employee-status/users/11/statuses 304 in 150ms :: []
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@demo.io
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@demo.io
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@demo.io
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
11:34:09 AM [express] GET /api/celebrations/today 304 in 519ms :: []
11:34:09 AM [express] GET /api/points/balance 304 in 604ms :: {"balance":0,"userId":1}
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@demo.io
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@demo.io
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@demo.io
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
11:34:09 AM [express] GET /api/celebrations/upcoming 304 in 204ms :: []
Cache MISS for key: departments:org:4
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@demo.io
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Cache MISS for key: locations:org:4
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Returning 762 users for company unknown
11:34:15 AM [express] GET /api/users 304 in 6732ms :: [{"id":16,"username":"brian_lopez","name":"Briaâ€¦
11:34:15 AM [express] GET /api/users/departments 304 in 6117ms :: ["Engineering","Finance","HR","Infoâ€¦
/api/users/me: Returning data for user 1 (Admin User, admin@demo.io)
User isAdmin value: true
11:34:15 AM [express] GET /api/users/locations 304 in 6138ms :: ["London","New York","New york officeâ€¦
Cache MISS for key: locations:org:1
Cache MISS for key: departments:org:1
Final user object isAdmin: true
11:34:15 AM [express] GET /api/users/me 304 in 5993ms :: {"id":1,"username":"admin","name":"Admin Useâ€¦
11:34:15 AM [express] GET /api/points/balance 304 in 4694ms :: {"balance":0,"userId":11}
11:34:15 AM [express] GET /api/users/locations 304 in 4698ms :: ["London","New York","New york officeâ€¦
11:34:15 AM [express] GET /api/users/departments 304 in 4699ms :: ["Engineering","Finance","HR","Infoâ€¦
Birthday users found: 5
Anniversary users found: 1
Total celebrations returning: 6
11:34:15 AM [express] GET /api/celebrations/today 304 in 4779ms :: [{"id":2167,"user":{"id":2167,"namâ€¦
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@demo.io
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: firebaseAuth is not defined
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379
Redis Client Error: connect ECONNREFUSED 127.0.0.1:6379