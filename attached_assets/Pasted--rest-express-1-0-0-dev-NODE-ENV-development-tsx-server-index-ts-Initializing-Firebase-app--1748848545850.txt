
> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

Initializing Firebase app with project ID: employee-reward-fb8ea
Using uploads directory: /home/runner/workspace/server/uploads
Creating admin user in Firebase...
Creating admin user: admin@demo.io
Admin user already exists in Firebase: uZkwsK8qLzNL8SS7z6t0husSWC33
Updated admin claims for user
Admin user setup completed
ðŸŽ‚ Scheduling birthday rewards job (daily at 08:00)
7:13:39 AM [express] serving on port 5000
Browserslist: browsers data (caniuse-lite) is 8 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
7:14:00 AM [express] GET /api/points/balance 304 in 388ms :: {"balance":0,"userId":11}
Birthday users found: 5
Anniversary users found: 1
Total celebrations returning: 6
7:14:01 AM [express] GET /api/celebrations/today 304 in 475ms :: [{"id":2167,"user":{"id":2167,"nameâ€¦
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
/api/users/me: Returning data for user 11 (Canva Administrator, admin@canva.com)
User isAdmin value: true
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Returning 801 users for company 1
7:14:07 AM [express] GET /api/users 304 in 7011ms :: [{"id":16,"username":"brian_lopez","name":"Briaâ€¦
7:14:07 AM [express] GET /api/users/departments 304 in 6368ms :: ["Engineering","Finance","HR","Infoâ€¦
Final user object isAdmin: true
7:14:07 AM [express] GET /api/users/me 304 in 6379ms :: {"id":11,"username":"admin_canva","name":"Caâ€¦
7:14:07 AM [express] GET /api/users/locations 304 in 6329ms :: ["London","New York","New york officeâ€¦
7:14:07 AM [express] GET /api/points/balance 304 in 4369ms :: {"balance":0,"userId":11}
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
7:14:07 AM [express] GET /api/celebrations/upcoming 304 in 7275ms :: [{"id":2122,"user":{"id":2122,"â€¦
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Birthday users found: 5
Anniversary users found: 1
Total celebrations returning: 6
7:14:07 AM [express] GET /api/celebrations/today 304 in 229ms :: [{"id":2167,"user":{"id":2167,"nameâ€¦
/api/users/me: Returning data for user 11 (Canva Administrator, admin@canva.com)
User isAdmin value: true
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
7:14:08 AM [express] GET /api/users/departments 304 in 151ms :: ["Engineering","Finance","HR","Inforâ€¦
Final user object isAdmin: true
7:14:08 AM [express] GET /api/users/me 304 in 150ms :: {"id":11,"username":"admin_canva","name":"Canâ€¦
7:14:08 AM [express] GET /api/users/locations 304 in 148ms :: ["London","New York","New york office"â€¦
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Social microservice: Handling get posts request
7:14:08 AM [express] GET /api/social/stats 304 in 232ms :: {"posts":0,"comments":0,"reactions":0,"reâ€¦
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Social microservice: Filtering posts for company 1 (admin@canva.com)
Social microservice: Retrieved 0 posts
7:14:08 AM [express] GET /api/social/posts 304 in 345ms :: []
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Returning 801 users for company 1
7:14:14 AM [express] GET /api/users 304 in 6542ms :: [{"id":16,"username":"brian_lopez","name":"Briaâ€¦
Social microservice: Handling get posts request
7:14:14 AM [express] GET /api/social/stats 304 in 6120ms :: {"posts":0,"comments":0,"reactions":0,"râ€¦
Social microservice: Filtering posts for company 1 (admin@canva.com)
Social microservice: Retrieved 0 posts
7:14:14 AM [express] GET /api/social/posts 304 in 5936ms :: []
7:14:15 AM [express] GET /api/celebrations/upcoming 304 in 6791ms :: [{"id":2122,"user":{"id":2122,"â€¦
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
7:14:47 AM [express] GET /api/points/balance 304 in 410ms :: {"balance":0,"userId":11}
Birthday users found: 5
Anniversary users found: 1
Total celebrations returning: 6
7:14:47 AM [express] GET /api/celebrations/today 304 in 482ms :: [{"id":2167,"user":{"id":2167,"nameâ€¦
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
/api/users/me: Returning data for user 11 (Canva Administrator, admin@canva.com)
User isAdmin value: true
Final user object isAdmin: true
7:14:47 AM [express] GET /api/users/me 304 in 239ms :: {"id":11,"username":"admin_canva","name":"Canâ€¦
7:14:47 AM [express] GET /api/users/departments 304 in 233ms :: ["Engineering","Finance","HR","Inforâ€¦
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Returning 801 users for company 1
7:14:54 AM [express] GET /api/users 304 in 7035ms :: [{"id":16,"username":"brian_lopez","name":"Briaâ€¦
7:14:54 AM [express] GET /api/users/locations 304 in 6387ms :: ["London","New York","New york officeâ€¦
Social microservice: Handling get posts request
7:14:54 AM [express] GET /api/social/stats 304 in 6074ms :: {"posts":0,"comments":0,"reactions":0,"râ€¦
Social microservice: Filtering posts for company 1 (admin@canva.com)
Social microservice: Retrieved 0 posts
7:14:54 AM [express] GET /api/social/posts 304 in 6085ms :: []
7:14:54 AM [express] GET /api/celebrations/upcoming 304 in 7325ms :: [{"id":2122,"user":{"id":2122,"â€¦
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
7:15:17 AM [express] GET /api/points/balance 304 in 411ms :: {"balance":0,"userId":11}
7:15:17 AM [express] GET /api/users/departments 304 in 414ms :: ["Engineering","Finance","HR","Inforâ€¦
Birthday users found: 5
Anniversary users found: 1
Total celebrations returning: 6
7:15:17 AM [express] GET /api/celebrations/today 304 in 477ms :: [{"id":2167,"user":{"id":2167,"nameâ€¦
7:15:17 AM [express] GET /api/users/locations 304 in 389ms :: ["London","New York","New york office"â€¦
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
/api/users/me: Returning data for user 11 (Canva Administrator, admin@canva.com)
User isAdmin value: true
Returning 801 users for company 1
7:15:23 AM [express] GET /api/users 304 in 6964ms :: [{"id":16,"username":"brian_lopez","name":"Briaâ€¦
Final user object isAdmin: true
7:15:23 AM [express] GET /api/users/me 304 in 6316ms :: {"id":11,"username":"admin_canva","name":"Caâ€¦
7:15:24 AM [express] GET /api/celebrations/upcoming 304 in 7269ms :: [{"id":2122,"user":{"id":2122,"â€¦
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Custom token decode - important fields:
- sub (Firebase UID): undefined
- email: admin@canva.com
- aud (audience): undefined
- iss (issuer): undefined
Failed to verify Firebase token, trying JWT: Firebase ID token has no "kid" claim. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
Social microservice: Handling get posts request
7:15:24 AM [express] GET /api/social/stats 304 in 227ms :: {"posts":0,"comments":0,"reactions":0,"reâ€¦
Social microservice: Filtering posts for company 1 (admin@canva.com)
Social microservice: Retrieved 0 posts
7:15:24 AM [express] GET /api/social/posts 304 in 237ms :: []
^C