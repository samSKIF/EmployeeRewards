# Dual-Write Pattern Configuration
# Controls the gradual migration to Employee Core microservice

# Employee Core Service Configuration
EMPLOYEE_CORE_URL=http://localhost:3001
EMPLOYEE_CORE_TIMEOUT=5000
EMPLOYEE_CORE_RETRY_ATTEMPTS=2

# Dual-Write Control Flags
ENABLE_DUAL_WRITE=true           # Enable/disable dual-write pattern
ENABLE_EMPLOYEE_CORE_DUAL_WRITE=true  # Specific flag for Employee Core proxy
READ_FROM_NEW_SERVICE=false      # Start reading from Employee Core (phase 2)
DUAL_WRITE_PERCENTAGE=10         # Percentage of writes to new service (0-100)
DUAL_WRITE_MODE=async            # sync or async mode for dual writes

# Migration Phases:
# Phase 1: ENABLE_DUAL_WRITE=true, DUAL_WRITE_PERCENTAGE=10, READ_FROM_NEW_SERVICE=false
#   - 10% of writes go to Employee Core (async)
#   - All reads from monolith
#   - Monitor success rate
#
# Phase 2: Gradually increase DUAL_WRITE_PERCENTAGE (20, 50, 80, 100)
#   - Monitor each increase for stability
#   - Roll back if issues detected
#
# Phase 3: DUAL_WRITE_PERCENTAGE=100, DUAL_WRITE_MODE=sync
#   - All writes go to both systems synchronously
#   - Ensure data consistency
#
# Phase 4: READ_FROM_NEW_SERVICE=true
#   - Start reading from Employee Core
#   - Monolith becomes backup
#
# Phase 5: Complete migration
#   - Remove dual-write code
#   - Employee Core becomes primary